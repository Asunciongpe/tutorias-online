<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tutor√≠as Escolares Online</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400&display=swap" rel="stylesheet">
  <style>
    body { margin: 0; font-family: 'Montserrat', Arial, sans-serif;
      background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
      min-height: 100vh; color: #222;}
    header {background: #fff8; padding: 24px 0 12px 0; text-align: center;
      box-shadow: 0 2px 8px #185a9d22;}
    header h1 {margin: 0; font-size: 2.5rem; color: #185a9d; letter-spacing: 1px;}
    header p {color: #444; margin: 10px 0 0 0; font-size: 1.15rem;}
    .container {max-width: 900px; margin: 40px auto 0 auto; background: #fff;
      border-radius: 16px; padding: 32px 24px;
      box-shadow: 0 6px 32px #185a9d33; text-align: center;}
    .cta-btn {padding: 16px 42px; background: linear-gradient(90deg, #43cea2, #185a9d);
      color: #fff; border: none; border-radius: 30px; font-size: 1.1rem; font-weight: 700;
      cursor: pointer; transition: box-shadow 0.2s; margin: 30px 0 0 0;
      box-shadow: 0 2px 8px #185a9d44;}
    .cta-btn:hover {box-shadow: 0 4px 16px #185a9d77;}
    .subjects {display: flex; flex-wrap: wrap; justify-content: center; margin: 36px 0 0 0; gap: 24px;}
    .subject-card {background: #f6fafd; border-radius: 12px; padding: 26px 22px; min-width: 140px;
      box-shadow: 0 2px 8px #185a9d11; font-size: 1.1rem; transition: transform 0.15s; cursor: pointer;
      border: 2px solid transparent;}
    .subject-card:hover {transform: scale(1.07); border: 2px solid #43cea2; background: #e0f7fa;}
    .tutors-section {margin-top: 40px; text-align: left;}
    .tutor-list {display: flex; flex-wrap: wrap; gap: 32px; justify-content: center; margin: 20px 0 0 0;}
    .tutor-card {background: #e8f5fd; border-radius: 10px; padding: 18px 22px; min-width: 180px;
      box-shadow: 0 2px 8px #185a9d11; text-align: center; font-size: 1rem; border-left: 4px solid #43cea2;}
    .tutor-card h4 {margin: 0 0 4px 0; color: #185a9d;}
    .tutor-card p {margin: 2px 0 0 0; color: #333; font-size: 0.97rem;}
    .modal-bg {display: none; position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.42); align-items: center; justify-content: center; z-index: 1000;}
    .modal-bg.active {display: flex;}
    .modal {background: #fff; border-radius: 16px; padding: 32px 28px; box-shadow: 0 6px 32px #185a9d44;
      max-width: 420px; width: 95vw; text-align: center; animation: dropin 0.2s; position: relative;}
    @keyframes dropin {from { opacity:0; transform:translateY(-40px);} to { opacity:1; transform:none;}}
    .modal h2 {margin-top: 0; color: #185a9d;}
    .modal .user-type-btn {margin: 18px 12px 0 12px; padding: 12px 32px; border-radius: 24px;
      background: #f0faf7; border: 2px solid #43cea2; color: #185a9d; font-weight: bold; cursor: pointer;
      font-size: 1rem; transition: background 0.2s;}
    .modal .user-type-btn.selected, .modal .user-type-btn:hover {background: #43cea2; color: #fff; border-color: #185a9d;}
    .modal input, .modal select {margin: 10px 0 16px 0; padding: 10px; width: 90%; border: 1px solid #185a9d66;
      border-radius: 8px; font-size: 1rem;}
    .modal .close-x {position: absolute; right: 22px; top: 18px; font-size: 1.7rem; color: #185a9d; cursor: pointer; font-weight: bold;}
    .tutorias-list, .reservar-list {margin: 22px 0 0 0; text-align: left;}
    .tutoria-item, .reservar-item {background: #f6fafd; border-radius: 10px; padding: 10px 16px; margin-bottom: 10px;
      display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;}
    .tutoria-detail {font-size: 0.98em; margin-top: 2px; color: #185a9d;}
    .tutoria-item button, .reservar-item button {background: #43cea2; color:#fff; border: none; border-radius: 8px;
      padding: 7px 18px; cursor: pointer; transition: background 0.2s; font-size: 0.95rem; margin-left: 6px; margin-top: 6px;}
    .tutoria-item button:hover, .reservar-item button:hover {background: #185a9d;}
    .modal .back-btn {margin-top: 10px; background: transparent; border: none; color: #185a9d; cursor: pointer;
      text-decoration: underline; font-size: 0.98rem;}
    .error-msg {color: red; margin-top: -10px; margin-bottom: 8px; font-size: 1em;}
    .success-msg {color: #43cea2; font-weight: bold; margin-top: 12px; margin-bottom: 8px; font-size: 1.04em;}
    @media (max-width: 700px) {.subjects, .tutor-list {flex-direction: column; align-items: center;}
      .container {padding: 18px 4vw;} header h1 {font-size: 2rem;} .modal { padding: 18px 2vw;}}
  </style>
</head>
<body>
  <header>
    <h1>Tutor√≠as Escolares Online</h1>
    <p>Encuentra tutores o estudiantes para todas las materias, conecta y aprende a tu ritmo.</p>
  </header>
  <div class="container">
    <h2>¬øQu√© materia te interesa?</h2>
    <div class="subjects" id="subjects">
      <div class="subject-card" onclick="showTutors('Qu√≠mica')">‚öóÔ∏è Qu√≠mica</div>
      <div class="subject-card" onclick="showTutors('Matem√°ticas')">üìê Matem√°ticas</div>
      <div class="subject-card" onclick="showTutors('Tecnolog√≠a')">üíª Tecnolog√≠a</div>
      <div class="subject-card" onclick="showTutors('F√≠sica')">üß≤ F√≠sica</div>
      <div class="subject-card" onclick="showTutors('Franc√©s')">üá´üá∑ Franc√©s</div>
      <div class="subject-card" onclick="showTutors('Ingl√©s')">üá¨üáß Ingl√©s</div>
    </div>
    <button class="cta-btn" onclick="openModal()">¬°Quiero registrarme!</button>
    <section class="tutors-section" id="tutors-section" style="display:none;">
      <h3>Algunos tutores disponibles</h3>
      <div class="tutor-list" id="tutor-list"></div>
      <button class="cta-btn" style="margin-top:20px;" onclick="contactTutor()">Contactar Tutor</button>
    </section>
  </div>
  <!-- Registro Modal -->
  <div class="modal-bg" id="modal-bg">
    <div class="modal" id="modal-content">
      <span class="close-x" onclick="closeModal()">&times;</span>
      <div id="modal-step1">
        <h2>¬øEres tutor o estudiante?</h2>
        <button class="user-type-btn" onclick="nextStep('tutor')">Tutor</button>
        <button class="user-type-btn" onclick="nextStep('estudiante')">Estudiante</button>
      </div>
      <div id="modal-tutor-login" style="display:none;">
        <h2>Ingreso de Tutor</h2>
        <input type="text" id="tutor-user" placeholder="Correo">
        <input type="password" id="tutor-pass" placeholder="Contrase√±a">
        <button class="cta-btn" onclick="tutorDashboard()">Ingresar</button>
        <button class="back-btn" onclick="goBackModal()">‚Üê Volver</button>
        <div id="tutor-login-error" class="error-msg" style="display:none;">Usuario o contrase√±a incorrectos</div>
      </div>
      <div id="modal-tutor-dash" style="display:none;">
        <h2>Panel de Tutor</h2>
        <div style="font-size:1.1em; margin-bottom:16px;"><b id="tutor-name-label"></b></div>
        <div class="tutorias-list" id="tutor-panel-list"></div>
        <div id="tutor-no-tutorias" style="color:#888; margin-top:12px;">No tienes tutor√≠as nuevas.</div>
        <button class="back-btn" onclick="goBackModal(true)">‚Üê Cerrar sesi√≥n</button>
      </div>
      <div id="modal-estudiante" style="display:none;">
        <h2>Reservar tutor√≠a</h2>
        <input type="text" id="estudiante-nombre" placeholder="Tu nombre">
        <input type="email" id="estudiante-correo" placeholder="Tu correo">
        <select id="materia-select" onchange="updateTutorSelect()">
          <option value="">Selecciona materia</option>
          <option>Matem√°ticas</option>
          <option>Qu√≠mica</option>
          <option>Tecnolog√≠a</option>
          <option>F√≠sica</option>
          <option>Franc√©s</option>
          <option>Ingl√©s</option>
        </select>
        <select id="tutor-select">
          <option value="">Selecciona tutor</option>
        </select>
        <input type="datetime-local" id="estudiante-horario" min="">
        <input type="number" id="estudiante-duracion" placeholder="Duraci√≥n (minutos)" min="10" max="180">
        <input type="number" id="estudiante-monto" placeholder="Monto a pagar (m√≠nimo $40)" min="40">
        <div id="reserva-error" class="error-msg" style="display:none;"></div>
        <button class="cta-btn" onclick="reservarTutoria()">Reservar</button>
        <div class="reservar-list" id="reserva-confirm" style="display:none;"></div>
        <div id="reserva-success" class="success-msg" style="display:none;"></div>
        <button class="back-btn" onclick="goBackModal()">‚Üê Volver</button>
      </div>
    </div>
  </div>
  <script>
    // Lista de tutores y materias
    const tutorAccounts = [
      { name: "Christian Roldan", email: "christian.roldan@anahuac.mx", password: "12345678", materias: ["Matem√°ticas", "F√≠sica", "Qu√≠mica"] },
      { name: "Leonardo Cristino", email: "leonardo.cristino@anahuac.mx", password: "12345678", materias: ["Matem√°ticas"] },
      { name: "Antonio Tovar", email: "antonio.tovar@anahuac.mx", password: "12345678", materias: ["Matem√°ticas"] },
      { name: "Maria Vega", email: "maria.vega01@anahuac.mx", password: "12345678", materias: ["Tecnolog√≠a", "Franc√©s"] },
      { name: "Valeria Nieves", email: "valeria.nieves@anahuac.mx", password: "12345678", materias: ["Franc√©s", "Ingl√©s"] }
    ];
    // Mapeo materias-tutores
    const tutors = {
      'Qu√≠mica': tutorAccounts.filter(t=>t.materias.includes("Qu√≠mica")),
      'Matem√°ticas': tutorAccounts.filter(t=>t.materias.includes("Matem√°ticas")),
      'Tecnolog√≠a': tutorAccounts.filter(t=>t.materias.includes("Tecnolog√≠a")),
      'F√≠sica': tutorAccounts.filter(t=>t.materias.includes("F√≠sica")),
      'Franc√©s': tutorAccounts.filter(t=>t.materias.includes("Franc√©s")),
      'Ingl√©s': tutorAccounts.filter(t=>t.materias.includes("Ingl√©s"))
    };
    // Solicitudes de tutor√≠a por correo de tutor
    let tutoriasByTutor = {};
    function showTutors(subject) {
      const tutorsSection = document.getElementById('tutors-section');
      const tutorList = document.getElementById('tutor-list');
      tutorList.innerHTML = '';
      if (tutors[subject] && tutors[subject].length > 0) {
        tutors[subject].forEach(tutor => {
          tutorList.innerHTML += `
            <div class="tutor-card">
              <h4>${tutor.name}</h4>
              <p>${tutor.email}</p>
              <p>Materia: ${subject}</p>
            </div>
          `;
        });
        tutorsSection.style.display = 'block';
        tutorsSection.scrollIntoView({ behavior: 'smooth' });
      } else {
        tutorList.innerHTML = `<div class="tutor-card">No hay tutores disponibles para esta materia actualmente.</div>`;
        tutorsSection.style.display = 'block';
        tutorsSection.scrollIntoView({ behavior: 'smooth' });
      }
    }
    function contactTutor() {
      alert('En una versi√≥n real, aqu√≠ podr√≠as contactar al tutor seleccionado.');
    }
    function openModal() {
      document.getElementById('modal-bg').classList.add('active');
      showModalStep('modal-step1');
    }
    function closeModal() {
      document.getElementById('modal-bg').classList.remove('active');
      showModalStep('modal-step1');
      document.getElementById('tutor-user').value = "";
      document.getElementById('tutor-pass').value = "";
      document.getElementById('estudiante-nombre').value = "";
      document.getElementById('estudiante-correo').value = "";
      document.getElementById('materia-select').value = "";
      document.getElementById('tutor-select').innerHTML = `<option value="">Selecciona tutor</option>`;
      document.getElementById('estudiante-horario').value = "";
      document.getElementById('estudiante-duracion').value = "";
      document.getElementById('estudiante-monto').value = "";
      document.getElementById('reserva-confirm').style.display = "none";
      document.getElementById('reserva-success').style.display = "none";
      document.getElementById('reserva-error').style.display = "none";
      document.getElementById('tutor-login-error').style.display = "none";
    }
    function showModalStep(stepId) {
      ['modal-step1','modal-tutor-login','modal-tutor-dash','modal-estudiante'].forEach(id=>{
        document.getElementById(id).style.display = (id===stepId)?'block':'none';
      });
      if(stepId==='modal-tutor-dash') renderTutoriasPanel();
    }
    function nextStep(type) {
      if(type==='tutor') showModalStep('modal-tutor-login');
      else showModalStep('modal-estudiante');
    }
    function goBackModal(logout) {
      if(logout) {
        loggedTutorEmail = null;
        showModalStep('modal-step1');
      }
      else {
        if(document.getElementById('modal-tutor-dash').style.display==="block")
          showModalStep('modal-tutor-login');
        else
          showModalStep('modal-step1');
      }
      document.getElementById('reserva-confirm').style.display = "none";
      document.getElementById('reserva-success').style.display = "none";
      document.getElementById('reserva-error').style.display = "none";
      document.getElementById('tutor-login-error').style.display = "none";
    }
    // Login tutor
    let loggedTutorEmail = null;
    function tutorDashboard() {
      const user = document.getElementById('tutor-user').value.trim().toLowerCase();
      const pass = document.getElementById('tutor-pass').value.trim();
      const found = tutorAccounts.find(acc=>acc.email.toLowerCase()===user && acc.password===pass);
      if(found) {
        loggedTutorEmail = found.email;
        document.getElementById('tutor-login-error').style.display = "none";
        document.getElementById('tutor-name-label').innerText = found.name;
        showModalStep('modal-tutor-dash');
      } else {
        document.getElementById('tutor-login-error').style.display = "block";
      }
    }
    function renderTutoriasPanel() {
      const listDiv = document.getElementById('tutor-panel-list');
      const noTut = document.getElementById('tutor-no-tutorias');
      listDiv.innerHTML = '';
      let tutorias = tutoriasByTutor[loggedTutorEmail]||[];
      if(tutorias.length === 0) {
        noTut.style.display = 'block';
      } else {
        noTut.style.display = 'none';
        tutorias.forEach((tutoria, idx) => {
          listDiv.innerHTML += `
            <div class="tutoria-item" id="tutoria-panel-${idx}">
              <div>
                <b>${tutoria.materia}</b> - ${tutoria.nombreEst}
                <div class="tutoria-detail">
                  ${tutoria.fechaHoraTxt} | ${tutoria.duracion} min | $${tutoria.monto} <br>
                  Email estudiante: ${tutoria.emailEst}
                </div>
              </div>
              <button onclick="aceptarTutoria(this,'${loggedTutorEmail}',${idx})" ${tutoria.aceptada?'disabled':''}>${tutoria.aceptada?'Aceptada':'Aceptar'}</button>
            </div>
          `;
        });
      }
    }
    function aceptarTutoria(btn, email, idx) {
      if(tutoriasByTutor[email] && tutoriasByTutor[email][idx]) {
        tutoriasByTutor[email][idx].aceptada = true;
        renderTutoriasPanel();
      }
    }
    function updateTutorSelect() {
      const materia = document.getElementById('materia-select').value;
      const tutorSelect = document.getElementById('tutor-select');
      tutorSelect.innerHTML = `<option value="">Selecciona tutor</option>`;
      if(tutors[materia] && tutors[materia].length > 0) {
        tutors[materia].forEach(tutor => {
          tutorSelect.innerHTML += `<option value="${tutor.email}">${tutor.name}</option>`;
        });
      }
    }
    document.addEventListener("DOMContentLoaded", ()=> {
      const now = new Date();
      now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
      document.getElementById('estudiante-horario').min = now.toISOString().slice(0,16);
    });
    function reservarTutoria() {
      const nombreEst = document.getElementById('estudiante-nombre').value.trim();
      const correoEst = document.getElementById('estudiante-correo').value.trim();
      const materia = document.getElementById('materia-select').value;
      const tutorEmail = document.getElementById('tutor-select').value;
      const fechaHora = document.getElementById('estudiante-horario').value;
      const duracion = parseInt(document.getElementById('estudiante-duracion').value,10);
      const monto = parseInt(document.getElementById('estudiante-monto').value,10);
      const errorDiv = document.getElementById('reserva-error');
      const confirmDiv = document.getElementById('reserva-confirm');
      const successDiv = document.getElementById('reserva-success');
      errorDiv.style.display = "none";
      confirmDiv.style.display = "none";
      successDiv.style.display = "none";
      if(!nombreEst || !correoEst || !materia || !tutorEmail || !fechaHora || isNaN(duracion) || isNaN(monto)) {
        errorDiv.innerText = "Por favor, completa todos los campos.";
        errorDiv.style.display = "block";
        return;
      }
      if(monto < 40) {
        errorDiv.innerText = "El monto m√≠nimo es de $40.";
        errorDiv.style.display = "block";
        return;
      }
      if(duracion < 10 || duracion > 180) {
        errorDiv.innerText = "La duraci√≥n debe ser entre 10 y 180 minutos.";
        errorDiv.style.display = "block";
        return;
      }
      const fechaObj = new Date(fechaHora);
      const fechaHoraTxt = fechaObj.toLocaleString('es-MX', { dateStyle:'short', timeStyle:'short' });
      if(!tutoriasByTutor[tutorEmail]) tutoriasByTutor[tutorEmail]=[];
      tutoriasByTutor[tutorEmail].push({
        nombreEst, materia, fechaHora, fechaHoraTxt, duracion, monto, emailEst: correoEst, aceptada: false
      });
      confirmDiv.style.display = "block";
      const tutor = tutorAccounts.find(t=>t.email===tutorEmail);
      confirmDiv.innerHTML = `<div class="reservar-item"><span><b>${materia}</b> reservado para <b>${nombreEst}</b> con el tutor(a) ${tutor.name} el ${fechaHoraTxt} por ${duracion} min. Monto: $${monto}.<br>Solicitud enviada a <b>${tutor.name}</b> (<a href="mailto:${tutor.email}">${tutor.email}</a>).</span></div>`;
      successDiv.innerText = "¬°Reserva enviada con √©xito! El tutor(a) recibir√° tu solicitud tanto aqu√≠ como en su correo.";
      successDiv.style.display = "block";
    }
  </script>
</body>
</html>